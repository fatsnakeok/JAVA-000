-- 用户表
CREATE TABLE `uc_base_user` (
  `open_id` bigint(20) NOT NULL,
  `uid` int(9) DEFAULT NULL,
  `user_name` varchar(50) DEFAULT NULL,
  `password` char(32) DEFAULT NULL,
  `salt` varchar(6) DEFAULT NULL,
  `state` tinyint(4) NOT NULL DEFAULT '1',
  `real_name` varchar(130) DEFAULT NULL,
  `avatar` varchar(200) DEFAULT NULL,
  `identity_code` varchar(20) DEFAULT NULL,
  `gender` tinyint(4) DEFAULT NULL,
  `mobile` varchar(20) DEFAULT NULL,
  `email` varchar(200) DEFAULT NULL,
  `regist_type` tinyint(4) DEFAULT NULL,
  `regist_source` tinyint(4) NOT NULL,
  `version` bigint(20) NOT NULL,
  `app_id` varchar(32) DEFAULT NULL,
  `create_user` char(36) NOT NULL,
  `bind_wx_uq_id` varchar(36) DEFAULT NULL,
  `bind_qq_uq_id` varchar(36) DEFAULT NULL,
  `bind_wb_uq_id` varchar(36) DEFAULT NULL,
  `bind_apple_uq_id` varchar(100) DEFAULT NULL,
  `user_type` int(11) DEFAULT NULL,
  `system_user_id` char(36) DEFAULT NULL,
  `create_time` datetime NOT NULL,
  `modify_user` char(36) DEFAULT NULL,
  `modify_time` datetime DEFAULT NULL,
  `summary` varchar(100) DEFAULT NULL,
  `profession` int(11) DEFAULT NULL,
  `location1` varchar(10) DEFAULT NULL,
  `location2` varchar(10) DEFAULT NULL,
  `birth_year` int(11) DEFAULT NULL,
  `birth_month` int(11) DEFAULT NULL,
  `birth_day` int(11) DEFAULT NULL,
  `tag` varchar(128) DEFAULT NULL,
  `app_channel` tinyint(4) DEFAULT NULL,
  `inter_code` int(10) DEFAULT NULL COMMENT '手机号地区码',
  `isStaff` tinyint(4) DEFAULT '2' COMMENT '是否为员工  (1: 是  2: 不是)',
  PRIMARY KEY (`open_id`) USING BTREE,
  UNIQUE KEY `uq_email` (`email`),
  UNIQUE KEY `uq_user_name` (`user_name`),
  UNIQUE KEY `uq_mobile` (`mobile`),
  KEY `index_wx_unid` (`bind_wx_uq_id`) USING BTREE,
  KEY `app_id_index` (`app_id`) USING BTREE,
  KEY `idx_createtime_mobile` (`create_time`,`mobile`),
  KEY `idx_createtime_email` (`create_time`,`email`),
  KEY `idx_realname` (`real_name`),
  KEY `idx_appid_createtime_username` (`app_id`,`create_time`,`user_name`),
  KEY `idx_createtime_username` (`create_time`,`user_name`),
  KEY `index_apple_unid` (`bind_apple_uq_id`) USING BTREE,
  KEY `idx_bindqquqid` (`bind_qq_uq_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT

-- 订单表
CREATE TABLE `pay_order` (
  `order_code` varchar(50) NOT NULL COMMENT '订单号',
  `goods_type` tinyint(4) DEFAULT NULL COMMENT '商品类型',
  `order_type` tinyint(4) DEFAULT NULL COMMENT '订单类型',
  `is_test` tinyint(4) DEFAULT NULL COMMENT '是否测试',
  `pay_type` tinyint(4) DEFAULT NULL COMMENT '支付类型',
  `orgin_price` decimal(10,2) DEFAULT NULL COMMENT '正常价格',
  `sale_price` decimal(10,2) NOT NULL COMMENT '优惠价格',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `create_user` bigint(32) NOT NULL COMMENT '创建人',
  `create_user_name` varchar(50) DEFAULT NULL COMMENT '创建人用户名',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  `update_user` bigint(32) DEFAULT NULL COMMENT '修改人',
  `update_user_name` varchar(50) DEFAULT NULL COMMENT '修改人用户名',
  `app_id` varchar(36) DEFAULT NULL COMMENT '应用ID',
  `sign` varchar(100) DEFAULT NULL COMMENT '验证签名',
  `state` tinyint(4) NOT NULL COMMENT '订单状态',
  `protocol_user_mobile` varchar(20) DEFAULT NULL,
  `protocol_user_name` varchar(200) DEFAULT NULL,
  `protocol_id` varchar(100) DEFAULT NULL,
  `expire_date` datetime DEFAULT NULL,
  `payCenterOrderNo` varchar(50) DEFAULT NULL,
  `sale_person_open_id` bigint(32) DEFAULT NULL,
  `sale_person_name` varchar(50) DEFAULT NULL,
  `languageKind` tinyint(4) DEFAULT NULL,
  `goods_name` varchar(100) DEFAULT NULL,
  `org_code` varchar(20) DEFAULT NULL,
  `org_name` varchar(100) DEFAULT NULL,
  `reference_id` bigint(32) DEFAULT NULL,
  `pay_time` datetime DEFAULT NULL,
  `parent_id` varchar(50) DEFAULT NULL,
  `paid` decimal(10,2) DEFAULT NULL,
  `pay_order_type` tinyint(4) DEFAULT '1',
  `remark` varchar(200) DEFAULT NULL,
  `sell_platform` varchar(36) DEFAULT NULL COMMENT '售卖平台ID',
  `crm_type` tinyint(1) DEFAULT NULL COMMENT '与crm相对应的type NL OC UP',
  `notify_url` varchar(500) DEFAULT NULL COMMENT '支付成功回调地址',
  `access_tag` varchar(50) DEFAULT NULL COMMENT '访问TAG',
  `access_ip` varchar(20) DEFAULT NULL COMMENT '访问IP',
  `third_order_id` varchar(50) DEFAULT NULL,
  `refund_price` decimal(10,2) DEFAULT NULL,
  `is_Artificial` tinyint(4) DEFAULT NULL COMMENT '是否是人工',
  `is_Price_Revision` tinyint(4) DEFAULT NULL COMMENT '是否改价',
  `follow_pay_type` tinyint(4) DEFAULT NULL COMMENT '续费类型',
  `good_cover_url` varchar(200) DEFAULT NULL COMMENT '商品封面',
  `order_achievement` decimal(10,2) DEFAULT NULL COMMENT '订单业绩',
  `goods_sale_price` decimal(10,2) DEFAULT NULL COMMENT '商品卖价',
  `receipt` text COMMENT '苹果内购收据',
  `transaction_id` varchar(20) DEFAULT NULL COMMENT '苹果内购交易ID',
  `zaoyuan_deduction` decimal(10,0) DEFAULT NULL COMMENT '早元抵扣',
  `zaoyuan_deduction_state` tinyint(1) DEFAULT NULL COMMENT '早元扣减是否成功',
  `receipts_type` tinyint(1) DEFAULT NULL COMMENT '收入种类: 1.现金收入 2.混合收入 3.纯早元收入',
  `generate_order_type` tinyint(1) DEFAULT NULL COMMENT '下单类型: 1:下单类型 2:代下单',
  `is_staff` tinyint(1) DEFAULT NULL COMMENT '是否为内部员工',
  `business_type_id` bigint(32) DEFAULT NULL COMMENT '业务类型ID',
  `is_gaea` tinyint(1) DEFAULT NULL COMMENT '是否为GAEA商品',
  PRIMARY KEY (`order_code`) USING BTREE,
  UNIQUE KEY `transaction_id_uq` (`transaction_id`),
  KEY `index_updateTime` (`update_time`) USING BTREE,
  KEY `index_payOrderType` (`pay_order_type`) USING BTREE,
  KEY `idx_parentid` (`parent_id`),
  KEY `idx_appid_state_payordertype` (`app_id`,`state`,`pay_order_type`),
  KEY `idx_createuser_appid` (`create_user`,`app_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT

-- 订单商品快照
CREATE TABLE `pay_order_goods` (
  `id` bigint(50) NOT NULL COMMENT '主键',
  `order_code` varchar(50) DEFAULT NULL COMMENT '订单号',
  `business` varchar(32) DEFAULT NULL COMMENT '业务',
  `business_label` varchar(50) DEFAULT NULL COMMENT '业务标签',
  `payor_id` bigint(32) DEFAULT NULL COMMENT '付款人',
  `payor_name` varchar(50) DEFAULT NULL COMMENT '付款人名称',
  `phone_code` varchar(50) DEFAULT NULL COMMENT '手机号',
  `goods_name` varchar(100) DEFAULT NULL COMMENT '商品名称',
  `goods_id` bigint(32) DEFAULT NULL,
  `orgin_price` decimal(10,2) DEFAULT NULL COMMENT '正常价格',
  `sale_price` decimal(10,2) DEFAULT NULL COMMENT '优惠价格',
  `discount` decimal(10,2) DEFAULT NULL COMMENT '优惠',
  `price` decimal(10,2) DEFAULT NULL COMMENT '金额',
  `zaoyuan_deduction` decimal(10,2) DEFAULT NULL COMMENT '早元抵扣',
  `real_pay` decimal(10,2) DEFAULT NULL COMMENT '实付',
  `actual_performance` decimal(10,2) DEFAULT NULL COMMENT '实际业绩',
  `order_state` tinyint(4) DEFAULT NULL COMMENT '订单状态',
  `order_state_label` varchar(50) DEFAULT NULL COMMENT '订单状态标签',
  `pay_type` tinyint(4) DEFAULT NULL COMMENT '支付类型',
  `pay_type_label` varchar(50) DEFAULT NULL COMMENT '支付方式标签',
  `submit_time` datetime DEFAULT NULL COMMENT '提交时间',
  `pay_time` datetime DEFAULT NULL COMMENT '支付时间',
  `create_user` bigint(32) DEFAULT NULL COMMENT '创建人',
  `create_user_name` varchar(50) DEFAULT NULL COMMENT '创建人用户名',
  `update_time` datetime DEFAULT NULL COMMENT '修改时间',
  `update_user` bigint(32) DEFAULT NULL COMMENT '修改人',
  `update_user_name` varchar(50) DEFAULT NULL COMMENT '修改人用户名',
  `app_id` varchar(36) DEFAULT NULL COMMENT '应用ID',
  `create_time` datetime DEFAULT NULL,
  `goods_cover_url` varchar(200) DEFAULT NULL COMMENT '商品封面图',
  `is_statistics` tinyint(4) DEFAULT '0' COMMENT '是否统计（0 按条件统计，1 统计）',
  `renewal_direction` tinyint(2) DEFAULT NULL COMMENT '续费方向',
  `sale_person_open_id` bigint(32) DEFAULT NULL COMMENT 'CCopenId',
  `sale_person_name` varchar(50) DEFAULT NULL COMMENT 'CC名称',
  `org_id` bigint(32) DEFAULT NULL COMMENT 'CC所在部门ID',
  `org_name` varchar(100) DEFAULT NULL COMMENT 'CC所在部门名称',
  `group_id` bigint(32) DEFAULT NULL COMMENT 'CC所在组ID',
  `group_name` varchar(100) DEFAULT NULL COMMENT 'CC所在组名称',
  `language_kind` tinyint(4) DEFAULT NULL COMMENT '语种',
  `goods_type` tinyint(4) DEFAULT NULL COMMENT '商品类型',
  `order_price` decimal(10,2) DEFAULT NULL COMMENT '订单价格',
  `is_normal_goods` tinyint(1) DEFAULT NULL COMMENT '是否为正式商品',
  `generate_order_type` tinyint(1) DEFAULT NULL COMMENT '生成订单类型 1:自主下单 2：代下单',
  `is_staff` tinyint(1) DEFAULT NULL COMMENT '是否为内部员工',
  `is_test` tinyint(1) DEFAULT NULL COMMENT '是否为测试订单',
  `business_type_id` bigint(32) DEFAULT NULL COMMENT '业务类型ID',
  `protocol_id` varchar(100) DEFAULT NULL COMMENT '协议ID',
  `is_gaea` tinyint(1) DEFAULT NULL COMMENT '是否为GAEA商品',
  `goods_small_picture` varchar(200) DEFAULT NULL COMMENT '商品小图',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `order_code_unique` (`order_code`) USING BTREE,
  KEY `idx_payorid_languagekind_isnormalgoods` (`payor_id`,`language_kind`,`is_normal_goods`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT

-- 商品表
CREATE TABLE `rc_goods` (
  `id` bigint(32) NOT NULL,
  `goods_id` bigint(32) DEFAULT NULL COMMENT '商品ID',
  `goods_name` varchar(50) DEFAULT NULL COMMENT '商品名称',
  `goods_type` tinyint(1) DEFAULT NULL COMMENT '商品类型: (1: 专题推荐, 2: 单品推荐)',
  `description` varchar(100) DEFAULT NULL COMMENT '商品描述',
  `app_id` varchar(32) DEFAULT NULL COMMENT '所属APP',
  `is_show` tinyint(1) DEFAULT NULL COMMENT '是否显示',
  `is_free` tinyint(1) DEFAULT NULL COMMENT '是否免费',
  `orign_price` decimal(10,2) DEFAULT NULL COMMENT '原价',
  `sale_price` decimal(10,2) DEFAULT NULL COMMENT '售价',
  `discounts_type` tinyint(1) DEFAULT NULL COMMENT '优惠类型 1:低至 2:直降',
  `cover_url` varchar(100) DEFAULT NULL COMMENT '封面图地址',
  `big_cover_url` varchar(100) DEFAULT NULL,
  `mid_cover_url` varchar(100) DEFAULT NULL,
  `small_cover_url` varchar(100) DEFAULT NULL,
  `synopsis` text,
  `out_line` text,
  `cover_background` varchar(10) DEFAULT NULL COMMENT '封面背景色',
  `sequence` int(2) DEFAULT NULL COMMENT '排序',
  `create_user` varchar(50) DEFAULT NULL COMMENT '创建人',
  `create_time` datetime DEFAULT NULL COMMENT '创建时间',
  `rc_type` tinyint(1) DEFAULT NULL,
  `skip_url` varchar(100) DEFAULT NULL COMMENT '推荐位商品使用字段: 跳转连接',
  `app_skip_url` varchar(100) DEFAULT NULL,
  `location_type` tinyint(1) DEFAULT NULL COMMENT '推荐位类型:    1: 广告推荐位,  2: 普通推荐位',
  `link_type` tinyint(1) DEFAULT NULL COMMENT '链接类型: 1: 专题,  2: 商品',
  `main_heading` varchar(50) DEFAULT NULL COMMENT '主标题',
  `sub_heading` varchar(50) DEFAULT NULL COMMENT '副标题',
  `goods_type_label` varchar(50) DEFAULT NULL COMMENT '商品类型(输入)',
  `wap_cover_url` varchar(100) DEFAULT NULL COMMENT 'wap封面图片',
  `goods_source` tinyint(1) NOT NULL DEFAULT '2' COMMENT '商品来源 1原日语系统商品  2GAEA商品',
  `goods_label` text COMMENT '商品标签，展示二级类别下商品标签，多个用逗号分隔',
  `price_label` text COMMENT '价格标签，展示二级类别下价格标签，多个用逗号分隔',
  `goods_point` int(4) DEFAULT NULL COMMENT '商品点数，仅倍普有',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='推荐商品'

